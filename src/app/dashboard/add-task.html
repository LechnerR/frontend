
<div class="container">
  <h3 mat-dialog-title>Aufgabe anlegen</h3>
<!-- {{diagnostic}} -->
<div mat-dialog-content>
  <form (ngSubmit)="onNoClick()" #addTask="ngForm">
    <div class="col-sm-6">
      <div class="form-group">
        <label for="title">Titel: </label>
        <input type="text" class="form-control" id="title" placeholder="Aufgabentitel" required [(ngModel)]="data.task.title" name="title" #title="ngModel"/>
        <div [hidden]="title.valid || title.pristine" class="alert alert-danger">
          Name is required
        </div>
      </div>
      <div class="form-group">
        <label for="descr">Beschreibung: </label>
        <textarea rows="15" class="form-control" id="descr" placeholder="Aufgabenbeschreibung" [(ngModel)]="data.task.descr" name="descr"></textarea>
      </div>
      <div class="form-group">
        <label for="notes">Notizen: </label>
        <textarea rows="7" class="form-control" id="notes" placeholder="Notizen" [(ngModel)]="data.task.notes" name="notes"></textarea>
      </div>
    </div>
    <div class="col-sm-6">
      <div *ngIf="data.task.users?.length > 0" class="col-sm-12">
        <div *ngFor="let user of data.task.users" class="col-sm-4">
          {{data.task.user.name}} {{data.task.user.email}}
        </div>
      </div>
      <div class="col-sm-12">
        <div class="col-sm-12">
          <label>User:</label>
        </div>
        <div class="col-sm-12" *ngFor="let user of users">
          {{user.name}}
        </div>
        <div class="col-sm-12">
          <label for="user">User </label>
          <i id="user" name="user" class="fa fa-plus-circle" (click)="addUser()"></i>
        </div>
      </div>
      <div class="col-sm-12">
        <mat-form-field>
          <label for="deadline">Deadline</label>
          <input matInput [matDatepicker]="myDatepicker" id="deadline" [(ngModel)]="data.task.deadline" name="deadline">
          <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
          <mat-datepicker #myDatepicker></mat-datepicker>
          <mat-checkbox [(ngModel)]="data.task.milestone" (change)="toggleEditable($event)" name="milestone">als Meilenstein festlegen</mat-checkbox>
        </mat-form-field>
      </div>

      <!-- <div class="input-group">
        <input type="text" class="form-control" id="task" aria-describedby="addtask" placeholder="neue Aufgabe" [(ngModel)]="project.tasks" name="task"/>
        <span class="input-group-addon"><i id="addtask" name="task" class="fa fa-plus" (click)="addTask()"></i></span>
      </div> -->
    </div>
    <div mat-dialog-actions class="col-sm-12">
      <button mat-button (click)="onNoClick()" tabindex="-1">Abbrechen</button>
      <button mat-button [mat-dialog-close]="data.task" tabindex="2" type="submit" class="btn btn-success" [disabled]="!addTask.form.valid">Speichern</button>
    </div>
    <!-- <div mat-dialog-actions class="col-sm-12">
      <button mat-button [mat-dialog-close]="data.task" tabindex="2">Ok</button>
      <button mat-button (click)="onNoClick()" tabindex="-1">No Thanks</button>
    </div> -->
  </form>
</div>
</div>
